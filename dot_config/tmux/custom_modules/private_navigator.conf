# Custom vim-tmux navigator with CSI u support for C-h/C-j
# Avoids backspace/newline collision while supporting both nvim and bun apps

# Pattern: vim, neovim, fzf, bun, nume-dev
%hidden is_app="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(view|l?n?vim?x?|fzf|bun|nume-dev)(-wrapped)?$'"

# C-h and C-j use CSI u sequences (avoids backspace/newline collision)
bind-key -n C-h if-shell "$is_app" "send-keys Escape '[104;5u'" "select-pane -L"
bind-key -n C-j if-shell "$is_app" "send-keys Escape '[106;5u'" "select-pane -D"

# C-k and C-l use normal control chars (no collision issues)
bind-key -n C-k if-shell "$is_app" "send-keys C-k" "select-pane -U"
bind-key -n C-l if-shell "$is_app" "send-keys C-l" "select-pane -R"

# Previous pane with C-\
bind-key -n 'C-\' if-shell "$is_app" "send-keys C-\\\\" "select-pane -l"

# Restore C-l for clear screen with prefix
bind C-l send-keys 'C-l'
